<%- model_class = User -%>

<div class="page-header">
  <h1>Manage User Shops</h1>
</div>

<%= form_for @user, url: update_shops_user_path(@user), 
	:html => { :class => "form-horizontal" } do |f| %>


	<% if @user.errors.any? %>
	    <div id="error_expl" class="panel panel-danger">
	      <div class="panel-heading">
	        <h3 class="panel-title"><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h3>
	      </div>
	      <div class="panel-body">
	        <ul>
	        <% @user.errors.full_messages.each do |msg| %>
	          <li><%= msg %></li>
	        <% end %>
	        </ul>
	      </div>
	    </div>
  	<% end %>



	<div class="form-group">
	    <%= f.label :name, :class => 'control-label col-lg-2' %>
	    <div class="col-lg-10 form-static-value">
	      <%= f.object.name %>
	    </div>
  	</div>

  	<%= f.hidden_field :id%>

	<div class="form-group">
	    <%= f.label :email, :class => 'control-label col-lg-2' %>
	    <div class="col-lg-10 form-static-value">
	      <%= f.object.email %>
	    </div>
  	</div>

  	<div class="page-header">
    	<h3>Owned shops</h3>
    </div>


	<div class="form-group">
		<%= f.fields_for :shop_admins do |shop_admin| %>
	    	<%= render 'shop_admin_fields', f: shop_admin %>
	    <% end %>

		<div class="col-lg-5">
		    <%= link_to_add_association 'Add New Shop', f, :shop_admins, 
	    		:class => 'btn btn-default' %>
    	</div>
    </div>

    <div class="form-group">
	    <div class="col-lg-offset-2 col-lg-10">
	      <%= f.submit nil, :class => 'btn btn-primary' %>
	      <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
	                users_path, :class => 'btn btn-default' %>
	    </div>
    </div>


<% end %>